<section id="gallery" class="gallery-section">
    <div class="container">
        <h2>My Creations</h2>
        <div class="gallery-grid">
            <% if (galleryItems && galleryItems.length > 0) { %>
                <% galleryItems.forEach(item => { %>
                    <div class="gallery-item"
                         data-full-url="<%= item.url %>"
                         data-resource-type="<%= item.url.toLowerCase().endsWith('.mp4') || item.url.toLowerCase().endsWith('.mov') ? 'video' : 'image' %>"
                         data-title="<%= item.title %>">
                        <!-- Kiểm tra đuôi file để hiển thị ảnh hoặc video -->
                        <% if (item.url.toLowerCase().endsWith('.mp4') || item.url.toLowerCase().endsWith('.mov')) { %>
                            <video class="gallery-video-thumbnail" src="<%= item.url %>" alt="<%= item.title %>" loading="lazy"></video>
                        <% } else { %>
                            <img src="<%= item.url %>" alt="<%= item.title %>" loading="lazy">
                        <% } %>
                        <div class="gallery-item-overlay">
                            <h3><%= item.title %></h3>
                            <button class="view-item-btn">View</button>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <p>No items in the gallery yet. Check back soon!</p>
            <% } %>
        </div>
    </div>

    <!-- The Lightbox Modal -->
    <div id="gallery-lightbox" class="lightbox">
        <span class="close-btn">&times;</span>
        <!-- Added utility buttons -->
        <div class="lightbox-utility-buttons">
            <a id="download-btn" class="utility-btn" download><i class="fas fa-download"></i> Tải xuống</a>
            <button id="copy-url-btn" class="utility-btn"><i class="fas fa-copy"></i> Sao chép URL</button>
        </div>
        <div class="lightbox-content">
            <img id="lightbox-image" src="" alt="Gallery Item" style="display: none;">
            <video id="lightbox-video" src="" controls style="display: none;"></video>
            <h3 id="lightbox-title"></h3>
        </div>
        <a class="prev-item">&#10094;</a>
        <a class="next-item">&#10095;</a>
    </div>
</section>
